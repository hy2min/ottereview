# 개발용 Dockerfile
FROM eclipse-temurin:17-jdk
WORKDIR /app

# gradlew와 gradle wrapper만 먼저 복사
COPY gradlew /app/
COPY gradle /app/gradle/
COPY build.gradle settings.gradle /app/

# 실행 권한 부여
RUN chmod +x ./gradlew

# 의존성 다운로드 (캐시 활용을 위해)
RUN ./gradlew dependencies --no-daemon || true

# 소스코드는 volume mount로 처리하므로 여기서 복사하지 않음
# COPY src /app/src/  <- 이 줄 제거

# 핫 리로드를 위한 개발 서버 실행
CMD ["./gradlew", "bootRun", "--continuous", "--no-daemon"]
